!function(a){"use strict";function b(){function a(){return this.init.apply(this,arguments)}var b={protocol:!0,slashedProtocol:!0,auth:!0,hostname:!0,port:!0,pathname:!0,search:!0,hash:!0,user:!1,pass:!1,host:!1,path:!1,query:!1};return a.prototype={pattern_href:/^(?:([a-z]{1,6}\:)(\/\/)?)?(?:([^\/@]*?)@)?(.*?)(?::([^0-9]+))?(\/[^\?]*?)?(\?[^#]*?)?(#.*)?$/i,init:function(c,d){var e;if(d&&(d instanceof a||(d=new a(d)),this.base=d),c)if("string"==typeof c)this.href=c,this.parse();else{for(e in c)e in b&&(this[e]=c[e]);this.format()}},parse:function(){var b,c=a.parse(this.href,this.base);Object.keys(c).forEach(function(a){this[a]=c[a]}.bind(this)),this.hostname&&(this.host=a.buildHost(this.hostname,this.port)),(this.pathname||this.search)&&(this.path=a.buildPath(this.pathname,this.search)),this.auth&&(b=a.parseAuth(this.auth),this.user=b.user,this.pass=b.pass),this.query=a.parseQuery(this.search)},format:function(){this.href=this.toString()},toObject:function(a){var c,d={};for(c in b)(!a||b[c])&&(d[c]=this[c]);return d},toString:function(){var b="";return(this.hostname||this.host)&&(this.protocol&&(b+=this.protocol,this.slashedProtocol&&(b+="//")),(this.auth||this.user)&&(b+=(this.auth||a.formatAuth(this.user,this.pass))+"@"),b+=this.host||a.buildHost(this.hostname,this.port)),b+=this.path||a.buildPath(this.pathname,this.query||this.search),b+=this.hash||""}},a.pattern_url=/^(?:([a-z]{1,6}\:)(\/\/)?)?(?:([^\/@]*?)@)?(.*?)(?::([0-9]+))?(\/[^\?]*?)?(\?[^#]*?)?(#.*)?$/i,a.parse=function(b,c){var d,e=a.pattern_url.exec(b),f={};if(!e)throw new Error("EasyUrl Parse Error on URL: "+b);return f.protocol=e[1],f.slashedProtocol=f.protocol&&!!e[2],f.auth=e[3],f.hostname=e[4],f.port=+e[5]||void 0,f.pathname=e[6],f.search=e[7],f.hash=e[8],f.protocol||f.auth||f.port||!c?f:("string"==typeof c&&(c=a.parse(c)),f.pathname=f.hostname+(f.pathname||""),"/"!==f.pathname[0]&&(f.pathname="/"+f.pathname),c.pathname&&(d=c.pathname.split("/"),d.length--,f.pathname=d.join("/")+f.pathname),f.protocol=c.protocol,f.auth=c.auth,f.hostname=c.hostname,f.port=c.port,f)},a.parseAuth=function(a){var b,c={};return b=a.indexOf(":"),-1!==b?(c.user=a.slice(0,b),c.pass=a.slice(b+1)):c.user=a,c},a.formatAuth=function(a){var b=a.user;return a.pass&&(b+=":"+a.pass),b},a.buildHost=function(a,b){var c=a;return b&&(c+=":"+b),c},a.buildPath=function(b,c){var d=b||"";return"string"==typeof c?d+=c:"object"==typeof c&&(d+=a.formatQuery(c)),d},a.parseQuery=function(a){var b={};return a?("?"===a[0]&&(a=a.substr(1)),a.split("&").forEach(function(a){var c;if(a)return c=a.indexOf("="),-1===c?void(b[a]=null):void(b[a.substr(0,c)]=a.substr(c+1))}),b):b},a.formatQuery=function(a){var b=Object.keys(a).map(function(b){var c=b;return null!==a[b]&&(c+="="+a[b]),c}).join("&");return b?"?"+b:""},a}"function"==typeof define&&define.amd?define("EasyUrl",[],b):a.EasyUrl=b()}(this);